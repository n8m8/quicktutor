<!doctype html>
<html>
<head>
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
  	<script type="text/javascript" src="{{ url_for('static', filename='javascript/chatRequests.js') }}"></script>
</head>

<body style="background-color: #89cff0;">
	<style>
		#mainContent {
			border: 1px solid #000;
			padding: 1em;
		}
	</style>
	<div class="container">
		{% include 'header.html' %}
		<div class="row" style="padding-top: 1em; ">
			<div class="col-md-8" id="mainContent">
				<div>
					{% include 'tutorRequests.html' %}
					<div class = "col-lg-8 col-md-8 col-sm-6 col-xs-12">
                        <!--<div class="alert alert-warning " role="alert">
                          <strong>Class Name</strong> Description of Problem
                          <button type="button" class="btn btn-success pull-right" id = "BtnFix">
                          <span class="glyphicon glyphicon-ok"></span>
                          </button>
                          <button type="button" class="btn btn-danger pull-right" id = "BtnTwoFix">
                          <span class="glyphicon glyphicon-remove"></span>
                          </button>
                        </div>-->
                        <table id='listingsTable'>

                        </table>
                    </div>

				</div>
			</div>
			<div class="col-md-4" id="mainContent">
				<div>
					<p>PROFILE AND INFO</p>
					<button id="buttonEditProfile" class="btn btn-sm btn-success btn-block" data-toggle="modal" data-target="#editProfileModal">Edit Profile</button>
					<button id="buttonNewRequest" class="btn btn-sm btn-primary btn-block">New Request</button>
					<form action="/auth/logout" style="margin-top: 5px;" method="POST"><button id="buttonLogOut" class="btn btn-sm btn-danger btn-block" onclick="window.location='/'">Log Out</button></form>
					<div id="modalNewRequest" class="modal">
						<div class="modal-content">
							<span id="modalNewRequestClose" class="close">&times;</span>
							<!--form action="/request/submitTestForm" method="POST">
								<label>First Name: </label>
								<input type="text" name="firstname" value="John">
								<br>
								<label>Last Name: </label>
								<input type="text" name="lastname" value="Doe">
								<br><br>
								<input type="submit" value="Submit">
							</form-->
							{% include 'NewRequestForm.html' %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="editProfileModal" tabindex="-1" role="dialog" aria-labelledby="editProfileModal" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Edit Profile</h4>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					{% include 'editProfileForm.html' %}
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>
			</div>
		</div>
	</div>

	<div id="chatboxholders" style="position: fixed; height: 40vh; bottom: 15px">
		<div id="row">
			{% include 'chatUI.html' %}
		</div>
	</div>

	<script>
  $(document).ready(function() {
    var markup1 = '<tr class="alert alert-warning " role="alert"><td><strong>' // then class name
    var markup2 = '</strong>' // then description of Problem
    var markup3 = '<button type="button" class="btn btn-success pull-right" onclick="acceptRequest('
    var markup4 = ')"><span class="glyphicon glyphicon-ok"></span></button><button type="button" class="btn btn-danger pull-right" onclick="dismissRequest('
    var markup5 = ')"><span class="glyphicon glyphicon-remove"></span></button></td><tr>'

    var listingModel = []
    $.getJSON('/listings/getall', function(data) {
      listingModel = data;
    }).then(function() {
      console.log(listingModel);
      $.each(listingModel, function(index, element) {
        $('#listingsTable').append(markup1 + element.classname + markup2 + element.shortDescription + markup3 + element.listingid + markup4 + element.listingid + markup5);
      });
    }, function() {
      console.log("/listings/getall request failed");
    });


  })
  function acceptRequest(listingId) {
    console.log("accepting listingid: " + listingId);
    
  };

  function dismissRequest(listingId) {
    console.log("dismissing listingid: " + listingId);
  };
	</script>

	<script>
	</script>

	<script type="text/javascript">
		// get variables from HTML
		var modalNewRequest = document.getElementById('modalNewRequest');
		var buttonNewRequest = document.getElementById('buttonNewRequest');
		var modalNewRequestClose = document.getElementById('modalNewRequestClose');

		// when the button to open modal is clicked, display modal div
		buttonNewRequest.onclick = function() {
			modalNewRequest.style.display = "block";
		}

		// when the button to close modal is clicked, hide modal div
		modalNewRequestClose.onclick = function() {
			modalNewRequest.style.display = "none";
		}

		// if
		window.onclick = function(event) {
			if (event.target == modalNewRequest) {
				modalNewRequest.style.display = "none";
			}
		}

		function editProfile() {

		}
	</script>
{% include 'footer.html' %}
</body>
</html>
